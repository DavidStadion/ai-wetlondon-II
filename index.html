
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wet London - Discover Indoor Activities</title>
    
    <meta name="google-adsense-account" content="ca-pub-1382628707656079">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1382628707656079" crossorigin="anonymous"></script>
<!-- AdSense loader moved to end of body to avoid blocking app init -->
<!-- Version 1.4.1 - Error Handling & Placeholder Images - Dec 23, 2025 -->
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .venues-loading {
            display: none;
            align-items: center;
            gap: 12px;
            padding: 16px;
            border: 1px solid #e6e6e6;
            border-radius: 14px;
            background: #fafafa;
            margin: 12px 0 18px;
        }

        .venues-loading .spinner {
            width: 18px;
            height: 18px;
            border: 2px solid rgba(0, 0, 0, 0.18);
            border-top-color: rgba(0, 0, 0, 0.55);
            border-radius: 50%;
            animation: venuesSpin 0.9s linear infinite;
        }

        @keyframes venuesSpin {
            to { transform: rotate(360deg); }
        }
    
        /* Good Right Now */
        .good-right-now .section-header {
            margin-bottom: 1.25rem;
        }
        .good-right-now .section-title {
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        .good-right-now .section-title:before {
            content: "‚ú®";
            font-size: 1.1em;
            line-height: 1;
        }
</style>
</head>

<body>
    <header class="header">
        <a href="#" class="logo">Wet London</a>

        <button class="nav-toggle" id="navToggle" type="button" aria-label="Open navigation" aria-expanded="false" aria-controls="siteNav">
            <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M4 6h16M4 12h16M4 18h16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
        </button>

        <nav class="nav" id="siteNav">
            <a href="#hero">Home</a>
            <a href="#activities">Featured</a>
            <a href="#all-activities">All Activities</a>
            <a href="#bookmarks">My Bookmarks</a>
            <a href="situations.html">For who?</a>
            <a href="about.html">About Us</a>
        </nav>
    </header>
    <div class="nav-scrim" id="navScrim" aria-hidden="true"></div>

    <section class="hero" id="hero">
        <div class="rain">
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
            <div class="rain-drop"></div>
        </div>

        <!-- Weather Widget -->
        <div class="weather-widget" id="weatherWidget">
            <div class="weather-loading" id="weatherLoading">
                <div class="weather-spinner"></div>
                <span>Loading weather...</span>
            </div>
            <div class="weather-content" id="weatherContent" style="display: none;">
                <div class="weather-main">
                    <div class="weather-icon" id="weatherIcon">üåßÔ∏è</div>
                    <div class="weather-info">
                        <div class="weather-temp" id="weatherTemp">--¬∞C</div>
                        <div class="weather-desc" id="weatherDesc">Loading...</div>
                    </div>
                </div>
                <div class="weather-details">
                    <div class="weather-detail">
                        <span class="weather-label">Feels like</span>
                        <span class="weather-value" id="weatherFeels">--¬∞C</span>
                    </div>
                    <div class="weather-detail">
                        <span class="weather-label">Humidity</span>
                        <span class="weather-value" id="weatherHumidity">--%</span>
                    </div>
                    <div class="weather-detail">
                        <span class="weather-label">Rain</span>
                        <span class="weather-value" id="weatherRain">--</span>
                    </div>
                </div>
                <div class="weather-message" id="weatherMessage"></div>
                <div class="weather-updated" id="weatherUpdated">Updated: --</div>
            </div>
            <button class="weather-refresh" id="weatherRefresh" onclick="refreshWeather()" title="Refresh weather">
                üîÑ
            </button>
        </div>

        <div class="hero-content">
            <h1>Wet London.</h1>
            <p>London ideas for when the weather is awful and your motivation is worse.</p>

            <!-- Search Bar -->
            <div class="search-container">
                <div class="search-bar">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchInput" class="search-input"
                        placeholder="Search activities, venues, or categories..." autocomplete="off">
                    <button class="clear-search-btn" id="clearSearchBtn" onclick="clearSearch()" style="display: none;">
                        ‚úï
                    </button>
                </div>
                <div class="search-suggestions" id="searchSuggestions" style="display: none;">
                    <!-- Dynamic suggestions will appear here -->
                </div>
            </div>

            <div class="hero-buttons">
                <button class="customize-btn">Customize Your Experience</button>
                <button class="lucky-btn">üé≤ I'm Feeling Lucky</button>
            </div>
        </div>
    </section>
    <!-- Good Right Now (Curated) -->
    <section class="activities-section good-right-now" id="goodRightNow" style="display: none;">
        <div class="container">
            <div class="section-header">
                <div>
                    <h2 class="section-title">Good right now</h2>
                    <p class="section-subtitle">Three low effort options that won‚Äôt punish you for leaving the house</p>
                                    <p class="trust-line" id="trustLine"></p>
</div>
            </div>

            <div class="activity-grid" id="goodRightNowGrid"></div>
        </div>
    </section>



    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Generating your experiences...</div>
            <div class="loading-subtext">Finding the perfect activities for you</div>
        </div>
    </div>

    <!-- Generated Results Section -->
    <section class="generated-section" id="generatedSection">
        <div class="generated-results-container">
            <button class="close-results-btn" onclick="clearResults()">‚úï</button>
            <div class="generated-header">
                <div>
                    <h2 class="generated-title">Your Personalized Selection</h2>
                    <span class="generated-count" id="generatedCount">0 activities found</span>
                </div>
            </div>
            <div class="activity-grid" id="generatedGrid"></div>
            <div class="load-more-container" id="loadMoreContainer" style="display: none;">
                <button class="load-more-btn" id="loadMoreBtn" onclick="loadMoreVenues()">Load more</button>
            </div>
        </div>
    </section>

    <!-- Lucky Selection Section (Hidden by default) -->
    <section class="lucky-selection-section" id="luckySelection" style="display: none;">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">üé≤ Your Lucky Selection</h2>
                <button class="close-lucky-btn" onclick="closeLuckySelection()">‚úï</button>
            </div>
            <div class="lucky-grid" id="luckyGrid"></div>
        </div>
    </section>


    <section class="categories-section" id="categories">
        <div class="container">
            <h2 class="section-title">Popular Categories</h2>
            <div class="category-grid" id="categoryGrid">
                <div class="category-card">
                    <div class="category-icon"></div>
                    <h3>Museums <span class="category-count" data-type="museums">(0)</span></h3>
                    <p>World-class collections and exhibitions from ancient artifacts to modern history</p>
                </div>
                <div class="category-card">
                    <div class="category-icon"></div>
                    <h3>Galleries <span class="category-count" data-type="galleries">(0)</span></h3>
                    <p>Contemporary art spaces showcasing innovative and thought-provoking works</p>
                </div>
                <div class="category-card">
                    <div class="category-icon"></div>
                    <h3>Theatre <span class="category-count" data-type="theatre">(0)</span></h3>
                    <p>West End shows, intimate productions, and world-renowned performances</p>
                </div>
                <div class="category-card">
                    <div class="category-icon"></div>
                    <h3>Dining <span class="category-count" data-type="dining">(0)</span></h3>
                    <p>Culinary experiences from Michelin-starred restaurants to hidden gems</p>
                </div>

                <!-- Hidden categories (5-12) -->
                <div class="category-card category-hidden">
                    <div class="category-icon"></div>
                    <h3>Entertainment <span class="category-count" data-type="entertainment">(0)</span></h3>
                    <p>Immersive experiences, shows, and attractions for all ages</p>
                </div>
                <div class="category-card category-hidden">
                    <div class="category-icon"></div>
                    <h3>Shopping <span class="category-count" data-type="shopping">(0)</span></h3>
                    <p>From luxury department stores to quirky boutiques and markets</p>
                </div>
                <div class="category-card category-hidden">
                    <div class="category-icon"></div>
                    <h3>Music Venues <span class="category-count" data-type="music">(0)</span></h3>
                    <p>Live music from intimate jazz clubs to iconic concert halls</p>
                </div>
                <div class="category-card category-hidden">
                    <div class="category-icon"></div>
                    <h3>Comedy Clubs <span class="category-count" data-type="comedy">(0)</span></h3>
                    <p>Stand-up, improv, and comedy shows to brighten rainy days</p>
                </div>
                <div class="category-card category-hidden">
                    <div class="category-icon"></div>
                    <h3>Gaming <span class="category-count" data-type="gaming">(0)</span></h3>
                    <p>VR experiences, arcades, board game cafes, and esports</p>
                </div>
                <div class="category-card category-hidden">
                    <div class="category-icon"></div>
                    <h3>Wellness & Spa <span class="category-count" data-type="wellness">(0)</span></h3>
                    <p>Relaxation, rejuvenation, and self-care experiences</p>
                </div>
                <div class="category-card category-hidden">
                    <div class="category-icon"></div>
                    <h3>Cinemas <span class="category-count" data-type="cinema">(0)</span></h3>
                    <p>From arthouse screens to IMAX spectacles</p>
                </div>
                <div class="category-card category-hidden">
                    <div class="category-icon"></div>
                    <h3>Historic Sites <span class="category-count" data-type="historic">(0)</span></h3>
                    <p>Castles, palaces, and landmarks steeped in history</p>
                </div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button class="show-more-btn" id="showMoreCategories" onclick="toggleCategories()">
                    Show More Categories
                </button>
            </div>
        </div>
    </section>



<!-- Advert -->
<section class="ad-slot">
  <div class="ad-slot-inner">
    <div class="ad-badge">Advertisement</div>
    <div class="ad-placeholder">
      <span>Your ad here</span>
      <small>970 √ó 250 / 728 √ó 90 / responsive</small>
    </div>
  </div>
</section>




    <section class="activities-section" id="activities">
        <div class="container">
            <h2 class="section-title">Featured Activities</h2>
            <div class="activity-grid">
                <div class="activity-card">
                    <div class="activity-image">
                        <div class="bookmark-icon" onclick="toggleBookmarkFromCard(event, 'British Museum')"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></div>
                        <div class="umbrella-chip" data-tooltip="Dry - Direct tube access">üåÇ</div>
                    </div>
                    <div class="activity-content">
                        <h3>British Museum</h3>
                        <div class="activity-tags">
                            <span class="tag">Museum</span>
                            <span class="tag">Central</span>
                            <span class="tag">Dry</span>
                        </div>
                        <p>2 million years of human history. Direct tube access, fully covered.</p>
                        <div class="wetness-indicator">
                            <div class="wetness-bar">
                                <div class="wetness-bar-fill" style="width: 0%"></div>
                            </div>
                            <span class="wetness-label">0% wet</span>
                        </div>
                        <div class="price">FREE</div>
                        <button class="book-btn">View Details</button>
                    </div>
                </div>

                <div class="activity-card">
                    <div class="activity-image">
                        <div class="bookmark-icon" onclick="toggleBookmarkFromCard(event, 'Tate Modern')"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></div>
                        <div class="umbrella-chip" data-tooltip="Slightly Wet - 5-10 min walk">‚òÇÔ∏è</div>
                    </div>
                    <div class="activity-content">
                        <h3>Tate Modern</h3>
                        <div class="activity-tags">
                            <span class="tag">Gallery</span>
                            <span class="tag">South</span>
                            <span class="tag">Dry</span>
                        </div>
                        <p>Contemporary art gallery on the Thames. 5 min walk from station.</p>
                        <div class="wetness-indicator">
                            <div class="wetness-bar">
                                <div class="wetness-bar-fill" style="width: 30%"></div>
                            </div>
                            <span class="wetness-label">30% wet</span>
                        </div>
                        <div class="price">FREE</div>
                        <button class="book-btn">View Details</button>
                    </div>
                </div>

                <div class="activity-card">
                    <div class="activity-image">
                        <div class="bookmark-icon" onclick="toggleBookmarkFromCard(event, 'West End Theatre')"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></div>
                        <div class="umbrella-chip" data-tooltip="Dry - Direct tube access">üåÇ</div>
                    </div>
                    <div class="activity-content">
                        <h3>West End Theatre</h3>
                        <div class="activity-tags">
                            <span class="tag">Theatre</span>
                            <span class="tag">Central</span>
                            <span class="tag">Dry</span>
                        </div>
                        <p>World-class performances. Most venues under 5 mins from tube.</p>
                        <div class="wetness-indicator">
                            <div class="wetness-bar">
                                <div class="wetness-bar-fill" style="width: 15%"></div>
                            </div>
                            <span class="wetness-label">15% wet</span>
                        </div>
                        <div class="price">FROM ¬£45</div>
                        <button class="book-btn">View Details</button>
                    </div>
                </div>

                <!-- Featured Card 1 -->
                <div class="activity-card">
                    <div class="activity-image">
                        <div class="bookmark-icon" onclick="toggleBookmarkFromCard(event, 'Sky Garden')"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></div>
                        <div class="featured-badge">Featured</div>
                        <div class="umbrella-chip" data-tooltip="Dry - Direct tube access">üåÇ</div>
                    </div>
                    <div class="activity-content">
                        <h3>Sky Garden</h3>
                        <div class="activity-tags">
                            <span class="tag">Dining</span>
                            <span class="tag">Central</span>
                            <span class="tag">Dry</span>
                        </div>
                        <p>London's highest public garden with panoramic 360¬∞ views. Experience fine dining 155 meters
                            above the city with direct lift access from street level. Free to visit, reservations
                            essential for the restaurant.</p>
                        <div class="wetness-indicator">
                            <div class="wetness-bar">
                                <div class="wetness-bar-fill" style="width: 10%"></div>
                            </div>
                            <span class="wetness-label">10% wet</span>
                        </div>
                        <div class="price">FREE ENTRY</div>
                        <button class="book-btn">View Details</button>
                    </div>
                </div>

                <div class="activity-card">
                    <div class="activity-image">
                        <div class="bookmark-icon" onclick="toggleBookmarkFromCard(event, 'Science Museum')"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></div>
                        <div class="umbrella-chip" data-tooltip="Dry - Direct tube access">üåÇ</div>
                    </div>
                    <div class="activity-content">
                        <h3>Science Museum</h3>
                        <div class="activity-tags">
                            <span class="tag">Museum</span>
                            <span class="tag">West</span>
                            <span class="tag">Dry</span>
                        </div>
                        <p>Interactive exhibits and innovations. Direct underground access.</p>
                        <div class="wetness-indicator">
                            <div class="wetness-bar">
                                <div class="wetness-bar-fill" style="width: 0%"></div>
                            </div>
                            <span class="wetness-label">0% wet</span>
                        </div>
                        <div class="price">FREE</div>
                        <button class="book-btn">View Details</button>
                    </div>
                </div>

                <div class="activity-card">
                    <div class="activity-image">
                        <div class="bookmark-icon" onclick="toggleBookmarkFromCard(event, 'Covent Garden Market')"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></div>
                        <div class="umbrella-chip" data-tooltip="Dry - Direct tube access">üåÇ</div>
                    </div>
                    <div class="activity-content">
                        <h3>Covent Garden Market</h3>
                        <div class="activity-tags">
                            <span class="tag">Shopping</span>
                            <span class="tag">Central</span>
                            <span class="tag">Covered</span>
                        </div>
                        <p>Historic covered market with boutiques and street performers.</p>
                        <div class="wetness-indicator">
                            <div class="wetness-bar">
                                <div class="wetness-bar-fill" style="width: 15%"></div>
                            </div>
                            <span class="wetness-label">15% wet</span>
                        </div>
                        <div class="price">FREE</div>
                        <button class="book-btn">View Details</button>
                    </div>
                </div>

                <div class="activity-card">
                    <div class="activity-image">
                        <div class="bookmark-icon" onclick="toggleBookmarkFromCard(event, 'Wine Tasting')"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></div>
                        <div class="umbrella-chip" data-tooltip="Dry - Direct tube access">üåÇ</div>
                    </div>
                    <div class="activity-content">
                        <h3>Wine Tasting</h3>
                        <div class="activity-tags">
                            <span class="tag">Food & Drink</span>
                            <span class="tag">Central</span>
                            <span class="tag">Dry</span>
                        </div>
                        <p>Premium wine experiences. Underground station adjacent.</p>
                        <div class="wetness-indicator">
                            <div class="wetness-bar">
                                <div class="wetness-bar-fill" style="width: 15%"></div>
                            </div>
                            <span class="wetness-label">15% wet</span>
                        </div>
                        <div class="price">¬£65</div>
                        <button class="book-btn">View Details</button>
                    </div>
                </div>

                <div class="activity-card">
                    <div class="activity-image">
                        <div class="bookmark-icon" onclick="toggleBookmarkFromCard(event, 'Escape Room')"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></div>
                        <div class="umbrella-chip" data-tooltip="Dry - Direct tube access">üåÇ</div>
                    </div>
                    <div class="activity-content">
                        <h3>Escape Room</h3>
                        <div class="activity-tags">
                            <span class="tag">Entertainment</span>
                            <span class="tag">East</span>
                            <span class="tag">Dry</span>
                        </div>
                        <p>Challenging puzzles and immersive scenarios. 3 min walk from station.</p>
                        <div class="wetness-indicator">
                            <div class="wetness-bar">
                                <div class="wetness-bar-fill" style="width: 15%"></div>
                            </div>
                            <span class="wetness-label">15% wet</span>
                        </div>
                        <div class="price">¬£28</div>
                        <button class="book-btn">View Details</button>
                    </div>
                </div>

                <!-- Featured Card 2 -->
                <div class="activity-card featured">
                    <div class="activity-image">
                        <div class="bookmark-icon"
                            onclick="toggleBookmarkFromCard(event, 'Frameless Immersive Art Experience')"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></div>
                        <div class="featured-badge">Featured</div>
                        <div class="umbrella-chip" data-tooltip="Slightly Wet - 5-10 min walk">‚òÇÔ∏è</div>
                    </div>
                    <div class="activity-content">
                        <h3>Frameless Immersive Art Experience</h3>
                        <div class="activity-tags">
                            <span class="tag">Exhibitions</span>
                            <span class="tag">Central</span>
                            <span class="tag">Slightly Wet</span>
                        </div>
                        <p>Step beyond the frame into the world's most iconic artworks. Multi-sensory galleries
                            featuring works from Canaletto to Kandinsky, brought to life through cutting-edge projection
                            technology. Perfect rainy day escape into art.</p>
                        <div class="wetness-indicator">
                            <div class="wetness-bar">
                                <div class="wetness-bar-fill" style="width: 30%"></div>
                            </div>
                            <span class="wetness-label">30% wet</span>
                        </div>
                        <div class="price">¬£24</div>
                        <button class="book-btn">View Details</button>
                    </div>
                </div>

            </div>
        </div>
        </div>
    </section>

    <!-- Weather-Based Recommendations Section -->
    <section class="weather-recommendations-section" id="weatherRecommendations" style="display: none;">
        <div class="container">
            <div class="weather-rec-header">
                <div class="weather-rec-icon" id="weatherRecIcon">‚òî</div>
                <div class="weather-rec-title-group">
                    <h2 class="weather-rec-title" id="weatherRecTitle">Perfect for Today's Weather</h2>
                    <p class="weather-rec-subtitle" id="weatherRecSubtitle">Stay dry and comfortable</p>
                </div>
            </div>
            <div class="activity-grid" id="weatherRecGrid">
                <!-- Dynamic weather-based recommendations will appear here -->
            </div>
        </div>
    </section>

    <!-- All Activities Section -->
    <section class="all-activities-section" id="all-activities">
        <div class="container">
            <div class="all-activities-header">
                <div>
                    <h2 class="section-title">All Activities</h2>
                    <p class="section-subtitle">Explore all 88+ indoor activities across London</p>
                </div>
            </div>

            <!-- Stats Bar -->
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-number" id="totalActivitiesCount">88</span>
                    <span class="stat-label">Total Activities</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="openNowCount">-</span>
                    <span class="stat-label">Open Now</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="freeActivitiesCount">-</span>
                    <span class="stat-label">Free Entry</span>
                </div>
            </div>

           <!-- Category Filter Chips -->
<div class="filter-chips-container">
  <div class="filter-chips-header">
    <h3>Filter by Category</h3>

    <div class="filter-chips-actions">
      <button
        class="filter-toggle-btn"
        id="categoryToggle"
        type="button"
        aria-expanded="true"
        aria-controls="categoryChipsWrap"
      >
        <span class="filter-toggle-label">Hide</span>
        <svg class="chevron" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
      </button>

      <button
        class="clear-filters-btn"
        id="clearCategoryFilters"
        onclick="clearCategoryFilters()"
        style="display: none;"
      >
        Clear All
      </button>
    </div>
  </div>

  <div id="categoryChipsWrap" class="chips-collapsible">
    <div class="category-chips" id="categoryChips">
      <!-- Will be populated by JavaScript -->
    </div>
  </div>
</div>


            <!-- Sorting Options -->
            <div class="sorting-container">
                <label for="sortSelect">Sort by:</label>
                <select id="sortSelect" class="sort-select" onchange="sortAllActivities()">
                    <option value="name-asc">Name (A-Z)</option>
                    <option value="name-desc">Name (Z-A)</option>
                    <option value="price-asc">Price (Low to High)</option>
                    <option value="price-desc">Price (High to Low)</option>
                    <option value="location">Location</option>
                    <option value="wetness-asc">Driest First</option>
                    <option value="wetness-desc">Wettest First</option>
                </select>
            </div>

            <!-- Activities Grid -->
                        <div class="venues-loading" id="venuesLoading">
                <div class="spinner"></div>
                <div>Loading venues from Supabase...</div>
            </div>

<div class="activity-grid" id="allActivitiesGrid">
                <!-- Will be populated by JavaScript -->
            </div>

            <!-- Load More Button -->
            <div class="load-more-container" id="allActivitiesLoadMore" style="display: none;">
                <button class="load-more-btn" onclick="loadMoreAllActivities()">
                    Load More Activities
                </button>
            </div>




            <!-- Advert -->
<section class="ad-slot">
  <div class="ad-slot-inner">
    <div class="ad-badge">Advertisement</div>
    <div class="ad-placeholder">
      <span>Your ad here</span>
      <small>970 √ó 250 / 728 √ó 90 / responsive</small>
    </div>
  </div>
</section>

            <!-- Back to Top Button -->
            <button class="back-to-top-btn" id="backToTopBtn" onclick="scrollToTop()" style="display: none;">
                ‚Üë
            </button>
        </div>
    </section>

    <!-- My Bookmarks Section -->
    <section class="generated-section" id="bookmarks">
        <div class="container">
            <div class="generated-header">
                <div>
                    <h2 class="generated-title">My Bookmarks</h2>
                    <span class="generated-count" id="bookmarksCount">0 bookmarked activities</span>
                </div>
                <button class="clear-results-btn" onclick="clearBookmarks()">Clear All Bookmarks</button>
            </div>
            <div class="activity-grid" id="bookmarksGrid"></div>
        </div>
    </section>

    <!-- Customization Modal -->
    <div class="modal" id="customizeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Customize Your Experience</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-section">
                    <label for="preferences">What are you looking to do?</label>
                    <input type="text" id="preferences"
                        placeholder="E.g., I want to learn about history, see contemporary art, try new foods...">
                </div>

                <div class="form-section">
                    <label>Activity Types</label>
                    <div class="tag-grid">
                        <div class="tag-option" data-type="museums">Museums</div>
                        <div class="tag-option" data-type="galleries">Galleries</div>
                        <div class="tag-option" data-type="theatre">Theatre</div>
                        <div class="tag-option" data-type="dining">Dining</div>
                        <div class="tag-option" data-type="entertainment">Entertainment</div>
                        <div class="tag-option" data-type="shopping">Shopping</div>
                        <div class="tag-option" data-type="wellness">Wellness & Spa</div>
                        <div class="tag-option" data-type="nightlife">Nightlife</div>
                        <div class="tag-option" data-type="music">Music Venues</div>
                        <div class="tag-option" data-type="comedy">Comedy Clubs</div>
                        <div class="tag-option" data-type="cinema">Cinemas</div>
                        <div class="tag-option" data-type="gaming">Gaming</div>
                        <div class="tag-option" data-type="workshops">Classes & Workshops</div>
                        <div class="tag-option" data-type="historic">Historic Sites</div>
                        <div class="tag-option" data-type="markets">Markets</div>
                        <div class="tag-option" data-type="sports">Sports & Fitness</div>
                        <div class="tag-option" data-type="exhibitions">Exhibitions</div>
                        <div class="tag-option" data-type="libraries">Libraries</div>
                    </div>
                </div>

                <div class="form-section">
                    <label>London Area</label>
                    <div class="location-grid">
                        <div class="tag-option location-option selected" data-location="all">All London</div>
                        <div class="tag-option location-option" data-location="north">North</div>
                        <div class="tag-option location-option" data-location="south">South</div>
                        <div class="tag-option location-option" data-location="east">East</div>
                        <div class="tag-option location-option" data-location="west">West</div>
                        <div class="tag-option location-option" data-location="central">Central</div>
                    </div>
                </div>

                <div class="form-section">
                    <label>How wet are you prepared to get?</label>
                    <div class="wetness-options">
                        <div class="wetness-option selected" data-wetness="any">
                            <strong>I don't mind</strong>
                            <span>Happy to experience any venue regardless of weather exposure.</span>
                        </div>
                        <div class="wetness-option" data-wetness="dry">
                            <strong>Not at all (Completely Dry)</strong>
                            <span>Direct tube/station access. Entire experience is fully covered and indoor.</span>
                        </div>
                        <div class="wetness-option" data-wetness="slightly">
                            <strong>Slightly Wet</strong>
                            <span>5-10 min walk from station. Some outdoor elements but mostly covered.</span>
                        </div>
                        <div class="wetness-option" data-wetness="wet">
                            <strong>Prepared to Get Wet</strong>
                            <span>Longer journey (10+ mins). Significant outdoor portions of the experience.</span>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <label>Maximum Wetness Tolerance</label>
                    <div class="wetness-slider-container">
                        <input type="range" id="wetnessSlider" min="0" max="100" value="100" step="5"
                            class="wetness-slider">
                        <div class="wetness-slider-labels">
                            <span>Completely Dry</span>
                            <span id="wetnessValue" style="font-weight: 600; color: #1a1a1a;">100%</span>
                            <span>Mostly Outdoors</span>
                        </div>
                    </div>
                    <p style="font-size: 0.85rem; color: #666; margin-top: 0.5rem;">Slide to filter activities by
                        maximum rain exposure</p>
                </div>

                <div class="form-section">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" id="openNowFilter" onchange="toggleOpenNow()"
                            style="width: 18px; height: 18px; cursor: pointer;">
                        <span style="font-weight: 600;">üü¢ Show only venues open now</span>
                    </label>
                    <p style="font-size: 0.85rem; color: #666; margin-top: 0.5rem; margin-left: 1.75rem;">Filter out
                        venues that are currently closed</p>
                </div>

                <button class="prerequisites-btn" onclick="openPrerequisites()">
                    + Add constraints like accessibility, budget, or dietary needs...
                </button>
            </div>
            <div class="modal-footer">
                <button class="btn-clear" onclick="clearFilters()">Clear All</button>
                <button class="btn-done" onclick="applyFilters()">
                    Done <span class="counter" id="filterCount">(0)</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Prerequisites Modal -->
    <div class="prerequisites-modal" id="prerequisitesModal">
        <div class="prerequisites-content">
            <div class="modal-header">
                <h2>Activity Prerequisites</h2>
                <button class="modal-close" onclick="closePrerequisites()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: #666; margin-bottom: 1.5rem; font-size: 0.9rem;">Select constraints to shape your
                    perfect experience</p>

                <div class="prereq-grid">
                    <div>
                        <div class="prereq-category">
                            <h4>Access & Mobility</h4>
                            <div class="prereq-tags">
                                <div class="prereq-tag">Wheelchair accessible</div>
                                <div class="prereq-tag">Step-free</div>
                                <div class="prereq-tag">Lift access</div>
                                <div class="prereq-tag">Low-impact</div>
                                <div class="prereq-tag">Seating available</div>
                                <div class="prereq-tag">Avoid stairs</div>
                            </div>
                        </div>

                        <div class="prereq-category">
                            <h4>Family & Groups</h4>
                            <div class="prereq-tags">
                                <div class="prereq-tag">Child-friendly</div>
                                <div class="prereq-tag">Pushchair-friendly</div>
                                <div class="prereq-tag">Family tickets</div>
                                <div class="prereq-tag">Quiet spaces</div>
                                <div class="prereq-tag">Interactive exhibits</div>
                            </div>
                        </div>

                        <div class="prereq-category">
                            <h4>Budget & Time</h4>
                            <div class="prereq-tags">
                                <div class="prereq-tag">Free entry</div>
                                <div class="prereq-tag">Under ¬£20</div>
                                <div class="prereq-tag">Under ¬£50</div>
                                <div class="prereq-tag">Premium</div>
                                <div class="prereq-tag">Under 1 hour</div>
                                <div class="prereq-tag">Half day</div>
                                <div class="prereq-tag">Full day</div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="prereq-category">
                            <h4>Sensory & Comfort</h4>
                            <div class="prereq-tags">
                                <div class="prereq-tag">Avoid crowds</div>
                                <div class="prereq-tag">Quiet environment</div>
                                <div class="prereq-tag">No flashing lights</div>
                                <div class="prereq-tag">No loud music</div>
                                <div class="prereq-tag">Well-lit spaces</div>
                                <div class="prereq-tag">Climate controlled</div>
                            </div>
                        </div>

                        <div class="prereq-category">
                            <h4>Dietary</h4>
                            <div class="prereq-tags">
                                <div class="prereq-tag">Vegan options</div>
                                <div class="prereq-tag">Vegetarian</div>
                                <div class="prereq-tag">Gluten-free</div>
                                <div class="prereq-tag">Halal</div>
                                <div class="prereq-tag">Kosher</div>
                                <div class="prereq-tag">Dairy-free</div>
                                <div class="prereq-tag">Nut-free</div>
                            </div>
                        </div>

                        <div class="prereq-category">
                            <h4>Neurodiverse</h4>
                            <div class="prereq-tags">
                                <div class="prereq-tag">Low sensory</div>
                                <div class="prereq-tag">Quiet hours</div>
                                <div class="prereq-tag">Predictable layouts</div>
                                <div class="prereq-tag">Clear signage</div>
                                <div class="prereq-tag">Relaxed timing</div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="prereq-category">
                            <h4>Practical</h4>
                            <div class="prereq-tags">
                                <div class="prereq-tag">Cloakroom</div>
                                <div class="prereq-tag">Toilets available</div>
                                <div class="prereq-tag">Cafe on-site</div>
                                <div class="prereq-tag">Free WiFi</div>
                                <div class="prereq-tag">Photography allowed</div>
                                <div class="prereq-tag">Booking required</div>
                                <div class="prereq-tag">Walk-ins welcome</div>
                            </div>
                        </div>

                        <div class="prereq-category">
                            <h4>Experience Style</h4>
                            <div class="prereq-tags">
                                <div class="prereq-tag">Educational</div>
                                <div class="prereq-tag">Interactive</div>
                                <div class="prereq-tag">Relaxing</div>
                                <div class="prereq-tag">Social</div>
                                <div class="prereq-tag">Solo-friendly</div>
                                <div class="prereq-tag">Romantic</div>
                                <div class="prereq-tag">Group activity</div>
                                <div class="prereq-tag">Unique experience</div>
                            </div>
                        </div>

                        <div class="prereq-category">
                            <h4>Inclusive</h4>
                            <div class="prereq-tags">
                                <div class="prereq-tag">LGBTQ+ friendly</div>
                                <div class="prereq-tag">Gender-neutral facilities</div>
                                <div class="prereq-tag">Inclusive spaces</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-clear" onclick="clearPrerequisites()">Clear All</button>
                <button class="btn-done" onclick="applyPrerequisites()">Done <span class="counter"
                        id="prereqCount">(0)</span></button>
            </div>
        </div>
    </div>

    <!-- Activity Detail Modal -->
    <div class="activity-modal" id="activityModal">
        <div class="activity-modal-content">
            <button class="activity-modal-close" onclick="closeActivityModal()">&times;</button>

            <div class="activity-modal-header">
                <h2 class="activity-modal-title" id="activityTitle">Activity Name</h2>
                <div class="activity-modal-meta">
                    <div class="activity-rating">
                        <span class="activity-rating-stars" id="activityStars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                        <span id="activityRating">4.8</span>
                    </div>
                    <span class="tag" id="activityPrice">FREE</span>
                    <span class="tag" id="activityLocation">Central</span>
                    <span id="activityUmbrella">üåÇ</span>
                    <div class="wetness-indicator" id="modalWetnessIndicator"
                        style="margin: 0; display: flex; align-items: center; gap: 0.75rem;">
                        <div class="wetness-bar" style="width: 100px; margin: 0;">
                            <div class="wetness-bar-fill" id="modalWetnessFill" style="width: 0%"></div>
                        </div>
                        <span class="wetness-label" id="modalWetnessLabel" style="white-space: nowrap;">0% wet</span>
                    </div>
                </div>
            </div>

            <div class="activity-modal-actions">
                <button class="action-btn action-btn-primary" id="bookActivityBtn">Book Now / Visit Website</button>
                <button class="action-btn action-btn-secondary" id="bookmarkActionBtn" onclick="bookmarkActivity()">
                    <span id="bookmarkIcon" class="bookmark-icon">
  <svg
    width="16"
    height="16"
    viewBox="0 0 24 24"
    aria-hidden="true"
  >
    <path
      d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linejoin="round"
    />
  </svg>
</span>
Save

                </button>
                <button class="action-btn action-btn-secondary" onclick="shareActivity()">
                    üì§ Share
                </button>
            </div>

            <div class="activity-modal-tabs">
                <div class="activity-tab active" onclick="switchTab('overview')">Overview</div>
                <div class="activity-tab" onclick="switchTab('gallery')">Gallery</div>
                <div class="activity-tab" onclick="switchTab('video')">Video</div>
                <div class="activity-tab" onclick="switchTab('reviews')">Reviews</div>
                <div class="activity-tab" onclick="switchTab('social')">Social</div>
            </div>

            <div class="activity-modal-body">
                <!-- Overview Tab -->
                <div class="activity-tab-content active" id="overview-tab">
                    <div class="about-section">
                        <h3>About</h3>
                        <p id="activityDescription">Description will appear here...</p>

                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-icon">üöá</div>
                                <div class="info-content">
                                    <h4>Getting There</h4>
                                    <p id="activityTransport">Transport information</p>
                                </div>
                            </div>
                            <div class="info-item">
                                <div class="info-icon">‚è∞</div>
                                <div class="info-content">
                                    <h4>Duration</h4>
                                    <p id="activityDuration">Flexible</p>
                                </div>
                            </div>
                            <div class="info-item">
                                <div class="info-icon">‚ôø</div>
                                <div class="info-content">
                                    <h4>Accessibility</h4>
                                    <p id="activityAccessibility">Accessibility info</p>
                                </div>
                            </div>
                            <div class="info-item">
                                <div class="info-icon">üé´</div>
                                <div class="info-content">
                                    <h4>Booking</h4>
                                    <p id="activityBooking">Booking info</p>
                                </div>
                            </div>
                            <div class="info-item">
                                <div class="info-icon">üïí</div>
                                <div class="info-content">
                                    <h4>Opening Hours</h4>
                                    <p id="activityOpeningHours"
                                        style="white-space: pre-line; font-size: 0.85rem; line-height: 1.6;">Hours not
                                        available</p>
                                </div>
                            </div>
                        </div>

                        <h3>What's Included</h3>
                        <ul id="activityIncludes">
                            <li>Experience details will appear here</li>
                        </ul>

                        <h3>Good to Know</h3>
                        <ul id="activityTips">
                            <li>Tips and recommendations</li>
                        </ul>

                       <div class="need-more-info">
  <h3 class="need-more-title">
    <span class="need-more-icon">üìû</span>
    Need More Information?
  </h3>

  <p class="need-more-text">
    For the most up-to-date information including specific opening times, current prices,
    special events, and booking details,
    we recommend checking the venue's official website or contacting them directly.
  </p>

  <button onclick="searchVenueOnline()" class="search-venue-btn">
    <span aria-hidden="true">üîç</span>
    Search "<span id="venueSearchName"></span>" Online
  </button>
</div>
                    </div>
                </div>

                <!-- Gallery Tab -->
                <div class="activity-tab-content" id="gallery-tab">
                    <div class="activity-gallery">
                        <div class="gallery-main">üì∑ Main Image Gallery</div>
                        <div class="gallery-thumb">Thumb 1</div>
                        <div class="gallery-thumb">Thumb 2</div>
                        <div class="gallery-thumb">Thumb 3</div>
                    </div>
                    <p style="text-align: center; color: #666; font-size: 0.9rem;">Click thumbnails to view full images
                    </p>
                </div>

                <!-- Video Tab -->
                <div class="activity-tab-content" id="video-tab">
                    <div class="video-container">
                        üé• Video Player
                        <br><small>Virtual tour and experience preview</small>
                    </div>
                    <h3>Watch & Learn</h3>
                    <p>Get a virtual preview of your experience. See what to expect, explore the venue, and discover
                        insider tips from previous visitors.</p>
                </div>

                <!-- Reviews Tab -->
                <div class="activity-tab-content" id="reviews-tab">
                    <h3>What People Are Saying</h3>

                    <div class="review-card">
                        <div class="review-header">
                            <div>
                                <div class="reviewer-name">Sarah M.</div>
                                <div class="review-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ 5.0</div>
                            </div>
                            <div class="review-date">2 weeks ago</div>
                        </div>
                        <p class="review-text">"Absolutely incredible experience! The exhibits were fascinating and the
                            staff were so knowledgeable. Definitely worth multiple visits. The cafe was a nice touch
                            too."</p>
                    </div>

                    <div class="review-card">
                        <div class="review-header">
                            <div>
                                <div class="reviewer-name">James T.</div>
                                <div class="review-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ 4.0</div>
                            </div>
                            <div class="review-date">1 month ago</div>
                        </div>
                        <p class="review-text">"Great venue with lots to see. Can get busy at weekends but still
                            manageable. Would recommend booking ahead if possible. Easy to get to from the tube."</p>
                    </div>

                    <div class="review-card">
                        <div class="review-header">
                            <div>
                                <div class="reviewer-name">Emma L.</div>
                                <div class="review-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ 5.0</div>
                            </div>
                            <div class="review-date">3 months ago</div>
                        </div>
                        <p class="review-text">"Perfect for a rainy day! Spent 3 hours here and barely scratched the
                            surface. The interactive elements were particularly engaging. Will definitely be back."</p>
                    </div>
                </div>

                <!-- Social Tab -->
                <div class="activity-tab-content" id="social-tab">
                    <h3>Social Media Buzz</h3>
                    <div class="social-feed">
                        <div class="social-post">
                            <div class="social-post-header">
                                <div class="social-avatar"></div>
                                <div>
                                    <div class="social-username">@londonexplorer</div>
                                    <div class="social-platform">Instagram ‚Ä¢ 2d ago</div>
                                </div>
                            </div>
                            <p class="social-post-content">
                                "Spent a rainy afternoon here and it was perfect! ‚òîÔ∏è The exhibits are stunning and
                                there's so much to see. #LondonIndoors #RainyDayFun"
                            </p>
                        </div>

                        <div class="social-post">
                            <div class="social-post-header">
                                <div class="social-avatar"></div>
                                <div>
                                    <div class="social-username">@culturevulture</div>
                                    <div class="social-platform">Twitter ‚Ä¢ 5d ago</div>
                                </div>
                            </div>
                            <p class="social-post-content">
                                "Absolutely blown away by this place! A must-visit for anyone in London. The
                                architecture alone is worth the trip üèõÔ∏è"
                            </p>
                        </div>

                        <div class="social-post">
                            <div class="social-post-header">
                                <div class="social-avatar"></div>
                                <div>
                                    <div class="social-username">@weekendwarrior</div>
                                    <div class="social-platform">Instagram ‚Ä¢ 1w ago</div>
                                </div>
                            </div>
                            <p class="social-post-content">
                                "Rainy London got you down? This is THE spot. Stayed dry and entertained for hours! üåßÔ∏è
                                ‚û°Ô∏è üèõÔ∏è"
                            </p>
                        </div>

                        <div class="social-post">
                            <div class="social-post-header">
                                <div class="social-avatar"></div>
                                <div>
                                    <div class="social-username">@familyadventures</div>
                                    <div class="social-platform">Facebook ‚Ä¢ 2w ago</div>
                                </div>
                            </div>
                            <p class="social-post-content">
                                "The kids loved it! Perfect for families on a wet day. Interactive exhibits kept them
                                engaged for ages üë®‚Äçüë©‚Äçüëß‚Äçüë¶"
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-icon" id="toastIcon">‚úì</span>
        <span class="toast-message" id="toastMessage">Activity saved!</span>
    </div>

    <!-- Share Modal -->
    <div class="share-modal" id="shareModal">
        <div class="share-modal-content">
            <div class="share-modal-header">
                <h3>Share Activity</h3>
                <button class="share-modal-close" onclick="closeShareModal()">√ó</button>
            </div>

            <div class="share-activity-info">
                <div class="share-activity-image" id="shareActivityImage"></div>
                <div class="share-activity-details">
                    <h4 id="shareActivityName">Activity Name</h4>
                    <p id="shareActivityDescription">Activity description goes here...</p>
                </div>
            </div>

            <div class="share-options">
                <button class="share-option" onclick="shareViaWhatsApp()">
                    <span class="share-option-icon">üí¨</span>
                    <span>WhatsApp</span>
                </button>
                <button class="share-option" onclick="shareViaEmail()">
                    <span class="share-option-icon">üìß</span>
                    <span>Email</span>
                </button>
                <button class="share-option" onclick="shareViaTwitter()">
                    <span class="share-option-icon">üê¶</span>
                    <span>Twitter / X</span>
                </button>
                <button class="share-option" onclick="shareViaFacebook()">
                    <span class="share-option-icon">üìò</span>
                    <span>Facebook</span>
                </button>
            </div>

            <div class="share-link-section">
                <div class="share-link-label">Or copy link</div>
                <div class="share-link-input-wrapper">
                    <input type="text" class="share-link-input" id="shareLink" readonly>
                    <button class="share-link-copy-btn" id="copyLinkBtn" onclick="copyShareLink()">
                        Copy Link
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-client.js"></script>
    <script src="js/data.js"></script>
    <script src="js/filter-state.js"></script>
    <script src="js/app.js"></script>

<script>
(function(){
  function safeParseSaved(){
    try {
      var raw = localStorage.getItem('savedActivities') || '[]';
      var arr = JSON.parse(raw);
      return Array.isArray(arr) ? arr : [];
    } catch (e) {
      return [];
    }
  }

  function normalizeName(name){
    return (name || '').toString().trim().toLowerCase();
  }

  function isSaved(name){
    var key = normalizeName(name);
    if (!key) return false;
    var saved = safeParseSaved();
    return saved.some(function(v){
      return normalizeName(v && v.name) === key;
    });
  }

  function extractNameFromOnclick(el){
    var attr = el.getAttribute('onclick') || '';
    var match = attr.match(/toggleBookmarkFromCard\s*\(\s*[^,]+,\s*['"]([^'"]+)['"]\s*\)/);
    if (match && match[1]) return match[1];
    var match2 = attr.match(/['"]([^'"]+)['"]\s*\)?\s*$/);
    if (match2 && match2[1]) return match2[1];
    return '';
  }

  function syncBookmarkIconEl(iconEl){
    if (!iconEl) return;
    var name = iconEl.getAttribute('data-activity-name') || extractNameFromOnclick(iconEl);
    if (!name) return;
    if (isSaved(name)) iconEl.classList.add('saved');
    else iconEl.classList.remove('saved');
  }

  function syncAllBookmarkIcons(){
    document.querySelectorAll('.bookmark-icon').forEach(function(el){
      syncBookmarkIconEl(el);
    });

    if (window.currentActivity && window.currentActivity.name){
      var modalSaved = isSaved(window.currentActivity.name);
      var modalIcon = document.getElementById('bookmarkIcon');
      if (modalIcon){
        if (modalSaved) modalIcon.classList.add('saved');
        else modalIcon.classList.remove('saved');
      }
      var modalBtn = document.getElementById('bookmarkActionBtn');
      if (modalBtn){
        modalBtn.classList.toggle('saved', modalSaved);
      }
    }
  }

  function afterBookmarkMutation(){
    // Next tick so any DOM updates finish first
    setTimeout(syncAllBookmarkIcons, 0);
  }

  function wrap(fnName){
    var fn = window[fnName];
    if (typeof fn !== 'function') return;
    if (fn.__wlWrapped) return;
    window[fnName] = function(){
      var res = fn.apply(this, arguments);
      afterBookmarkMutation();
      return res;
    };
    window[fnName].__wlWrapped = true;
  }

  function init(){
    // Initial state
    syncAllBookmarkIcons();

    // Wrap existing bookmark related functions if they exist
    ['toggleBookmarkFromCard','bookmarkActivity','loadBookmarks','clearBookmarks','updateBookmarkButton'].forEach(wrap);

    // Any click on a bookmark icon should trigger a resync
    document.addEventListener('click', function(e){
      var icon = e.target && e.target.closest ? e.target.closest('.bookmark-icon') : null;
      if (!icon) return;
      afterBookmarkMutation();
    }, true);

    // If some code writes localStorage directly, keep UI in sync
    window.addEventListener('storage', function(ev){
      if (ev && ev.key === 'savedActivities') syncAllBookmarkIcons();
    });

    // When bookmarks grid re-renders, resync icons elsewhere too
    var grid = document.getElementById('bookmarksGrid');
    if (grid && window.MutationObserver){
      var mo = new MutationObserver(function(){
        afterBookmarkMutation();
      });
      mo.observe(grid, { childList: true, subtree: true });
    }

    // When any new cards are added, sync only those icons
    if (window.MutationObserver){
      var mo2 = new MutationObserver(function(muts){
        var changed = false;
        muts.forEach(function(m){
          if (m.addedNodes && m.addedNodes.length) changed = true;
        });
        if (changed) afterBookmarkMutation();
      });
      mo2.observe(document.body, { childList: true, subtree: true });
    }
  }

  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

</div> <!-- Your last closing div -->



<!-- Advert -->
<section class="ad-slot">
  <div class="ad-slot-inner">
    <div class="ad-badge">Advertisement</div>
    <div class="ad-placeholder">
      <span>Your ad here</span>
      <small>970 √ó 250 / 728 √ó 90 / responsive</small>
    </div>
  </div>
</section>


<!-- DAVID'S TOP PICKS (Admin Highlighted) -->
<section class="activities-section" id="davidsTopPicksSection" style="display: none;">
  <div class="container">
    <div class="section-header">
      <div>
        <h2 class="section-title">Dave and Kate's Top 3.</h2>
        <p class="section-subtitle">Three venues I‚Äôm backing right now</p>
      </div>
    </div>

    <div class="activity-grid" id="davidsTopPicksGrid"></div>
  </div>
</section>



<!-- Saved for Later -->
<section class="activities-section" id="savedForLaterSection" style="display: none;">
  <div class="container">
    <div class="section-header">
      <div>
        <h2 class="section-title">Saved for later</h2>
        <p class="section-subtitle">Your rainy-day shortlist, ready when you are</p>
      </div>
      <a class="section-link" href="#bookmarks">View all</a>
    </div>

    <div class="empty-state" id="savedForLaterEmpty">
      <h3>Nothing saved yet</h3>
      <p>Tap the bookmark on a card to build your own little emergency plan for bad weather.</p>
      <a class="empty-state-cta" href="#all-activities">Browse activities</a>
    </div>

    <div class="activity-grid" id="savedForLaterGrid"></div>
  </div>
</section>

<!-- Recently viewed -->
<section class="activities-section" id="recentlyViewedSection" style="display: none;">
  <div class="container">
    <div class="section-header">
      <div>
        <h2 class="section-title">Recently viewed</h2>
        <p class="section-subtitle">So you can pick up where you left off</p>
      </div>
      <button class="section-link-btn" id="clearRecentlyViewedBtn" type="button">Clear</button>
    </div>

    <div class="empty-state" id="recentlyViewedEmpty">
      <h3>Nothing viewed yet</h3>
      <p>Open a couple of activities and we‚Äôll keep them here for quick backtracking.</p>
    </div>

    <div class="activity-grid" id="recentlyViewedGrid"></div>
  </div>
</section>


<!-- Partners -->
<section class="partners">
  <div class="partners-inner">
    <h2 class="partners-title">Our Partners</h2>

    <div class="partners-logos">
      <a class="partner" href="#" aria-label="Partner 1">
        <img src="assets/partners/partner-1.png" alt="Partner 1 logo" />
      </a>

      <a class="partner" href="#" aria-label="Partner 2">
        <img src="assets/partners/partner-2.png" alt="Partner 2 logo" />
      </a>

      <a class="partner" href="#" aria-label="Partner 3">
        <img src="assets/partners/partner-3.png" alt="Partner 3 logo" />
      </a>

      <a class="partner" href="#" aria-label="Partner 4">
        <img src="assets/partners/partner-4.png" alt="Partner 4 logo" />
      </a>
    </div>
  </div>
</section>

   <!-- ============================================
     WET LONDON FOOTER
     Add this before the closing 

    <!-- AdSense: load after app is interactive (prevents main-thread lockups) -->
    <script>
      (function(){
        try {
          var host = location.hostname || '';
          var allowHosts = ['wetlondon.co.uk', 'www.wetlondon.co.uk'];
          if (allowHosts.indexOf(host) === -1) return;
          if (location.search.indexOf('noads=1') !== -1) return;

          function loadAdsense(){
            if (document.querySelector('script[data-wetlondon-adsense]')) return;
            if (document.querySelector('script[src*="pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"]')) return;
            var s = document.createElement('script');
            s.async = true;
            s.defer = true;
            s.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1382628707656079';
            s.crossOrigin = 'anonymous';
            s.setAttribute('data-wetlondon-adsense', '1');
            document.head.appendChild(s);
          }

          // Defer loading until after the page is usable
          if ('requestIdleCallback' in window) {
            requestIdleCallback(function(){ setTimeout(loadAdsense, 500); }, { timeout: 5000 });
          } else {
            window.addEventListener('load', function(){ setTimeout(loadAdsense, 1500); }, { once: true });
          }
        } catch (e) {
          // Never let ads break the site
          console.warn('AdSense loader disabled:', e);
        }
      })();
    </script>

</body>

<footer class="site-footer">
    <div class="footer-container">
        <!-- Footer Top Section -->
        <div class="footer-top">
            <!-- About Section -->
            <div class="footer-column">
                <h3 class="footer-logo">üåßÔ∏è Wet London</h3>
                <p class="footer-description">
                    Your guide to the best indoor activities in London. 
                    Never let the rain stop your plans again.
                </p>
                <div class="footer-social">
                    <a href="https://twitter.com/wetlondon" target="_blank" rel="noopener" class="social-link" aria-label="Twitter">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </a>
                    <a href="https://instagram.com/wetlondon" target="_blank" rel="noopener" class="social-link" aria-label="Instagram">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                        </svg>
                    </a>
                    <a href="https://facebook.com/wetlondon" target="_blank" rel="noopener" class="social-link" aria-label="Facebook">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                    </a>
                    <a href="https://tiktok.com/@wetlondon" target="_blank" rel="noopener" class="social-link" aria-label="TikTok">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="footer-column">
                <h4 class="footer-heading">Quick Links</h4>
                <ul class="footer-links">
                    <li><a href="#hero">Home</a></li>
                    <li><a href="#activities">Featured Activities</a></li>
                    <li><a href="#all-activities">All Activities</a></li>
                    <li><a href="#bookmarks">My Bookmarks</a></li>
                </ul>
            </div>

            <!-- Resources -->
            <div class="footer-column">
                <h4 class="footer-heading">Resources</h4>
                <ul class="footer-links">
                    <li><a href="situations.html">For who?</a>
            <a href="about.html">About Us</a></li>
                    <li><a href="/contact.html">Contact</a></li>
                    <li><a href="/blog.html">Blog</a></li>
                    <li><a href="/partnerships.html">Partnerships</a></li>
                </ul>
            </div>

            <!-- Legal -->
            <div class="footer-column">
                <h4 class="footer-heading">Legal</h4>
                <ul class="footer-links">
                    <li><a href="/privacy.html">Privacy Policy</a></li>
                    <li><a href="/terms.html">Terms & Conditions</a></li>
                    <li><a href="/cookies.html">Cookie Policy</a></li>
                    <li><a href="/affiliate-disclosure.html">Affiliate Disclosure</a></li>
                </ul>
            </div>
        </div>
        
        <!-- Footer Bottom Section -->
        <div class="footer-bottom">
            <div class="footer-bottom-content">
                <p class="copyright">
                    ¬© 2026 Wet London. All rights reserved.
                </p>
                                <p class="footer-promise">Wet London only lists places that still work when the weather doesn‚Äôt.</p>
<p class="footer-tagline">
                    Made with ‚òï in London
                </p>
            </div>
        </div>
    </div>
</footer>


    <!-- AdSense: load after app is interactive (prevents main-thread lockups) -->
    <script>
      (function(){
        try {
          var host = location.hostname || '';
          var allowHosts = ['wetlondon.co.uk', 'www.wetlondon.co.uk'];
          if (allowHosts.indexOf(host) === -1) return;
          if (location.search.indexOf('noads=1') !== -1) return;

          function loadAdsense(){
            if (document.querySelector('script[data-wetlondon-adsense]')) return;
            if (document.querySelector('script[src*="pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"]')) return;
            var s = document.createElement('script');
            s.async = true;
            s.defer = true;
            s.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1382628707656079';
            s.crossOrigin = 'anonymous';
            s.setAttribute('data-wetlondon-adsense', '1');
            document.head.appendChild(s);
          }

          // Defer loading until after the page is usable
          if ('requestIdleCallback' in window) {
            requestIdleCallback(function(){ setTimeout(loadAdsense, 500); }, { timeout: 5000 });
          } else {
            window.addEventListener('load', function(){ setTimeout(loadAdsense, 1500); }, { once: true });
          }
        } catch (e) {
          // Never let ads break the site
          console.warn('AdSense loader disabled:', e);
        }
      })();
    </script>

</body>
</html>
<!-- VERSION: 2026-01-18 06:45 -->